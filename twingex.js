window.storyFormat({
  "name":"TwingeX",
  "version":"0.0.2",
  "author":'Ben (that guy) Winding',
  "description":"The extremely simple 'twingex' format.",
  "image":"icon.svg",
  "url":"http://github.com/benwinding/twingex/",
  "license":'MIT License',
  "proofing":false,
  "source":"<html>\\r\\n\\r\\n<head>\\r\\n  <title>{{STORY_NAME}}</title>\\r\\n  <meta charset=\\\"UTF-8\\\">\\r\\n  <script type=\\\"text/javascript\\\">\\r\\n    window.onload = function () {\\r\\n      if (typeof (window.TwingeX) == \\\"undefined\\\") {\\r\\n        window.TwingeX = {\\r\\n          convert: function () {\\r\\n            var output = window.document.getElementById(\\\"output\\\");\\r\\n            output.innerHTML = this.export();\\r\\n          },\\r\\n          export: function () {\\r\\n            var buffer = [];\\r\\n            var storyData = window.document.getElementsByTagName(\\\"tw-storydata\\\");\\r\\n            if (storyData) {\\r\\n              buffer.push(this.buildPassage(\\\"StoryTitle\\\", \\\"\\\", storyData[0].getAttribute(\\\"name\\\")));\\r\\n            }\\r\\n            var userScript = window.document.getElementById(\\\"twine-user-script\\\");\\r\\n            if (userScript) {\\r\\n              buffer.push(this.buildPassage(\\\"UserScript\\\", \\\"script\\\", userScript.innerHTML));\\r\\n            }\\r\\n            var userStylesheet = window.document.getElementById(\\\"twine-user-stylesheet\\\");\\r\\n            if (userStylesheet) {\\r\\n              buffer.push(this.buildPassage(\\\"UserStylesheet\\\", \\\"stylesheet\\\", userStylesheet.innerHTML));\\r\\n            }\\r\\n            var passages = window.document.getElementsByTagName(\\\"tw-passagedata\\\");\\r\\n            for (var i = 0; i < passages.length; ++i) {\\r\\n              buffer.push(this.buildPassageFromElement(passages[i]));\\r\\n            }\\r\\n            return buffer.join('');\\r\\n          },\\r\\n          buildPassageFromElement: function (passage) {\\r\\n            var name = passage.getAttribute(\\\"name\\\");\\r\\n            if (!name) {\\r\\n              name = \\\"Untitled Passage\\\";\\r\\n            }\\r\\n            var tags = passage.getAttribute(\\\"tags\\\");\\r\\n            var content = passage.textContent;\\r\\n            return this.buildPassage(name, tags, content);\\r\\n          },\\r\\n          buildPassage: function (title, tags, content) {\\r\\n            var result = [];\\r\\n            result.push(\\\":: \\\", title);\\r\\n            if (tags) {\\r\\n              result.push(\\\"[\\\", tags, \\\"]\\\");\\r\\n            }\\r\\n            result.push(\\\"\\\\r\\\\n\\\", this.scrub(content), \\\"\\\\r\\\\n\\\\r\\\\n\\\");\\r\\n            return result.join('');\\r\\n          },\\r\\n          scrub: function (content) {\\r\\n            if (content) {\\r\\n              content = content.replace(/^::/gm, \\\" ::\\\");\\r\\n              content = content.replace(/\\\\</gm, \\\"&lt;\\\");\\r\\n              content = content.replace(/\\\\>/gm, \\\"&gt;\\\");\\r\\n            }\\r\\n            return content;\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n      window.TwingeX.convert();\\r\\n    }\\r\\n  </script>\\r\\n</head>\\r\\n\\r\\n<body>\\r\\n  <pre id=\\\"output\\\">\\r\\n        \\r\\n        </pre>\\r\\n  <div id=\\\"storyData\\\" style=\\\"display: none;\\\">\\r\\n    {{STORY_DATA}}\\r\\n  </div>\\r\\n</body>\\r\\n\\r\\n</html>"
});